(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[215],{1130:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(52),i=n(3),o=Object(c.a)((function(e){return{create:{color:e.palette.success.main},updated:{color:e.palette.info.main},delete:{color:e.palette.error.main},cross:{color:e.palette.primary.light}}})),l=Object(c.a)((function(e){return{root:{padding:e.spacing(.5,1),borderRadius:e.spacing(1),textAlign:"center"},create:{background:e.palette.success.light,color:e.palette.getContrastText(e.palette.success.light)},update:{background:e.palette.info.light,color:e.palette.getContrastText(e.palette.info.light)},delete:{background:e.palette.error.light,color:e.palette.getContrastText(e.palette.error.light)},cross:{background:e.palette.primary.light,color:e.palette.getContrastText(e.palette.primary.light)}}})),d=n(9),s=n(8),u=(n(10),n(472),n(1192)),p=n(207);function b(e){var t=typeof e;return"undefined"===t||"object"===t?e?JSON.stringify(e,null,2):"":String(e)}var g=Object(c.a)((function(e){return{changes:{listStyleType:"none",padding:0,border:"solid 1px ".concat(e.palette.text.disabled),"& li":{padding:e.spacing(1,0),"& span":{whiteSpace:"pre-wrap",fontFamily:"courier",display:"inline-block",fontWeight:400,fontSize:14},"&:hover":{background:"#ffc"}}},added:{background:"#dfd",color:"#080;","& span::before":{content:'" +"',paddingRight:e.spacing(1)}},removed:{background:"#fee",color:"#b00","& span::before":{content:'" -"',paddingRight:e.spacing(1)}},unchanged:{background:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),"& span::before":{content:'"  "',paddingRight:e.spacing(1)}}}}));var f,j,v=n(544),h=n.n(v),O=n(1163),m=n(1178);t.default={title:"Trace",icon:Object(a.jsx)(h.a,{}),actions:{index:{fields:["data_type","target","action","message","created_at"],viewport:"{_id data_type {id name title _id} target action created_at origin}"},new:{fields:["data_type","target","action","message","created_at","changes_set"]}},fields:{data_type:{control:O.a},target:{control:O.a,viewer:Object(m.a)((function(e){return null===e||void 0===e?void 0:e.data_type}))},action:{control:O.a,viewer:(f=function(e){return null===e||void 0===e?void 0:e.action},j="background",function(e){var t=e.value,n=e.item,r="background"===j?l():o(),c=void 0===t||null===t?"-":String(t);return Object(a.jsx)("div",{className:Object(i.default)(r.root,r[f(n)]),children:c})})},message:{controlProps:{multiline:!0}},changes_set:{control:function(e){e.title;var t=e.value,n=(e.disabled,e.readOnly,e.error,e.onChange,e.property,Object(r.useState)({})),c=Object(s.a)(n,2),i=c[0],o=c[1],l=g();Object(r.useEffect)((function(){var e=t.changed().subscribe((function(e){var t={};Object.keys(e||{}).forEach((function(n){t[n]=u.diffLines(b(e[n][0]),b(e[n][1]),{newlineIsToken:!0})})),o(t)}));return t.changed().next(t.get()),function(){return e.unsubscribe()}}),[t]);var d=Object.keys(i).map((function(e){var t=[];return i[e].forEach((function(e){var n=(e.added?"added":e.removed&&"removed")||"unchanged";e.value.match(/[^\r\n]+/g).forEach((function(e){return t.push(Object(a.jsx)("li",{className:l[n],children:Object(a.jsx)("span",{children:e})}))}))})),Object(a.jsx)(p.a,{title:e,variant:"subtitle1",children:Object(a.jsx)("ul",{className:l.changes,children:t})})}));return Object(a.jsx)(a.Fragment,{children:d})}}},crud:[d.b.read,d.b.delete]}},1163:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),r=n(8),c=n(0),i=n(14),o=n(52),l=n(64),d=n(471),s=n(3),u=Object(o.a)((function(e){return{root:{border:"solid 1px ".concat(e.palette.background.default)},title:{minHeight:e.spacing(7),background:e.palette.background.default,borderTopLeftRadius:e.spacing(.5),borderTopRightRadius:e.spacing(.5),alignItems:"center",padding:e.spacing(0,2)},content:{padding:e.spacing(2)}}}));function p(e){var t=e.title,n=e.value,o=e.property,p=e.config,b=Object(i.a)(),g=Object(r.a)(b,2),f=g[0],j=g[1],v=u();Object(c.useEffect)((function(){var e=n.parent.changed().subscribe((function(e){return j({item:e})}));return function(){return e.unsubscribe()}}),[n]);var h=f.item,O=p.viewer||Object(d.a)(o);return Object(a.jsxs)("div",{className:v.root,children:[Object(a.jsx)("div",{className:Object(s.default)("flex",v.title),children:Object(a.jsx)(l.a,{variant:"subtitle2",children:t})}),Object(a.jsx)("div",{className:Object(s.default)("flex justify-content-center",v.content),children:Object(a.jsx)(O,{prop:o,value:n.get(),item:h})})]})}},1178:function(e,t,n){"use strict";var a=n(1),r=n(8),c=n(0),i=n(394),o=n(388),l=n(15),d=n(92),s=n(93),u=n(29),p=n(14),b=n(16);t.a=function(e){return function(t){var n=t.item,g=(t.prop,t.value),f=t.className,j=Object(p.a)(),v=Object(r.a)(j,2),h=v[0],O=v[1],m=h.title,x=h.dataType,y=h.empty;Object(c.useEffect)((function(){var t,a=null===(t=e(n))||void 0===t?void 0:t.id;if(a){var c=b.b.getById(a).pipe(Object(s.a)((function(e){return Object(u.a)(Object(d.a)(e),g&&e.titleFor(g)||Object(d.a)(null))}))).subscribe((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return O({dataType:n,title:a,empty:!1})}));return function(){return c.unsubscribe()}}O({empty:!0,dataType:null,title:null})}),[n]);return y||x?m?Object(a.jsx)(o.a,{label:m,onClick:function(){return l.e.next(l.d.for(x.id,g.id).key)},className:f}):Object(a.jsx)("span",{children:"-"}):Object(a.jsx)(i.a,{variant:"text"})}}}}]);