(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[276],{1129:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(0),c=a(4),s=a(78);function l(e){return Object(n.jsx)(s.a,Object(c.a)(Object(c.a)({},e),{},{children:Object(n.jsx)("path",{d:"M12,0A12,12,0,1,0,24,12,12,12,0,0,0,12,0Zm5.73,12.75H12a.76.76,0,0,1-.75-.75V7.85a.75.75,0,0,1,1.5,0v3.4h5a.75.75,0,0,1,0,1.5Z"})}))}var r=a(19),d=a(8),o=a(399),u=a.n(o),b=a(14),j=a(143),h=a(312),O=a(436),p=a(1156),v=a(1154),m=a(285),f=a(387),g=a(416),x=a.n(g),y=a(117),_=a.n(y),C=a(238),w=a(3),R=a(60),N=a(111);a(95),a(6);function k(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var z=a(7),T=a(11),M=i.forwardRef((function(e,t){var a=e.children,n=e.classes,c=e.className,s=e.exclusive,l=void 0!==s&&s,r=e.onChange,d=e.orientation,o=void 0===d?"horizontal":d,u=e.size,b=void 0===u?"medium":u,j=e.value,h=Object(N.a)(e,["children","classes","className","exclusive","onChange","orientation","size","value"]),O=function(e,t){if(r){var a,n=j&&j.indexOf(t);j&&n>=0?(a=j.slice()).splice(n,1):a=j?j.concat(t):[t],r(e,a)}},p=function(e,t){r&&r(e,j===t?null:t)};return i.createElement("div",Object(R.a)({role:"group",className:Object(w.default)(n.root,c,"vertical"===o&&n.vertical),ref:t},h),i.Children.map(a,(function(e){return i.isValidElement(e)?i.cloneElement(e,{className:Object(w.default)(n.grouped,n["grouped".concat(Object(T.a)(o))],e.props.className),onChange:l?p:O,selected:void 0===e.props.selected?k(e.props.value,j):e.props.selected,size:e.props.size||b}):null})))})),A=Object(z.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},vertical:{flexDirection:"column"},grouped:{},groupedHorizontal:{"&:not(:first-child)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-child)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}}),{name:"MuiToggleButtonGroup"})(M),L=a(20),S=a(176),H=i.forwardRef((function(e,t){var a=e.children,n=e.classes,c=e.className,s=e.disabled,l=void 0!==s&&s,r=e.disableFocusRipple,d=void 0!==r&&r,o=e.onChange,u=e.onClick,b=e.selected,j=e.size,h=void 0===j?"medium":j,O=e.value,p=Object(N.a)(e,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]);return i.createElement(S.a,Object(R.a)({className:Object(w.default)(n.root,c,l&&n.disabled,b&&n.selected,"medium"!==h&&n["size".concat(Object(T.a)(h))]),disabled:l,focusRipple:!d,ref:t,onClick:function(e){u&&(u(e,O),e.isDefaultPrevented())||o&&o(e,O)},onChange:o,value:O,"aria-pressed":b},p),i.createElement("span",{className:n.label},a))})),D=Object(z.a)((function(e){return{root:Object(R.a)({},e.typography.button,{boxSizing:"border-box",borderRadius:e.shape.borderRadius,padding:11,border:"1px solid ".concat(Object(L.d)(e.palette.action.active,.12)),color:Object(L.d)(e.palette.action.active,.38),"&$selected":{color:e.palette.action.active,backgroundColor:Object(L.d)(e.palette.action.active,.12),"&:hover":{backgroundColor:Object(L.d)(e.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:Object(L.d)(e.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:Object(L.d)(e.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:e.typography.pxToRem(15)}}}),{name:"MuiToggleButton"})(H),E=a(64),F=a(207),B=a(38),I=_()((function(e){return{input:{border:"none"}}}))(C.a);function J(e){var t=e.options,a=e.disabled,i=e.readOnly,c=e.className,s=Object(b.a)({option:t.find((function(e){return e.defaultOption}))||t[0]}),l=Object(d.a)(s,2),r=l[0],o=l[1],u=r.option,p=r.menuAnchor,v=function(e){return function(){e&&e!==u?(o({option:e,menuAnchor:null}),e.action()):o({menuAnchor:null})}},m=t.map((function(e,t){return Object(n.jsx)(O.a,{onClick:v(e),children:e.title},String(t))}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.a,{disabled:a,onClick:function(e){var t=e.target;return!i&&o({menuAnchor:t})},className:c,children:u.title}),Object(n.jsx)(h.a,{onClose:v(null),anchorEl:p,open:Boolean(p),children:m})]})}var V=u()((function(e){return{marginRight:{marginRight:e.spacing(1)},marginTop:{marginTop:e.spacing(1)},period:{padding:e.spacing(3,0)},word:{textTransform:"uppercase",padding:e.spacing(0,.5)},day:{minWidth:e.spacing(4)}}}));var $=a(9),P=a(17),W=a(93),Z=a(92),G=a(41),X=a(449),q=a.n(X),K=a(1201),Q=a.n(K),U="Switch Activation",Y="Activate",ee="Deactivate";function te(e){var t,a=e.selectedItems,n=e.data,i=a;if(i.length||1!==(null===n||void 0===n?void 0:n.total_pages)||(i=n.items),i.length){var c=0,s=0;i.forEach((function(e){e.activated?c++:s++})),t=c?s?U:ee:Y}else t=U;return t}var ae=function(){return Object(n.jsxs)(s.a,{children:[Object(n.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(n.jsx)("path",{d:"M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"})]})};$.c.register((function(e){var t=e.selectedItems,a=e.record,n=e.dataType,i=e.containerContext,c=e.selector;(t=a?[a]:t||[]).length&&(c={_id:{$in:t.map((function(e){return e.id}))}});var s,l=te(i[0]),r=l===Y?"activated":l===ee?"deactivated":"switched";if(a||1===t.length){var d=a||t[0];s="The scheduler ".concat(d.name," will be ").concat(r,".")}else s=t.length?"The ".concat(t.length," selected schedulers will be ").concat(r,"."):"All found schedulers will be ".concat(r);return i.confirm({title:l===Y?"Activation confirmation":l===ee?"Deactivation confirmation":"Activation switching confirmation",message:s}).pipe(Object(W.a)((function(e){return e?P.a.get("setup","data_type",n.id,"digest","switch",{headers:{"X-Digest-Options":JSON.stringify({selector:c})}}):Object(Z.a)(!1)})))}),{bulkable:!0,icon:function(){var e=Object(G.b)(),t=te(Object(d.a)(e,1)[0]);return t===Y?Object(n.jsx)(q.a,{}):t===ee?Object(n.jsx)(Q.a,{}):Object(n.jsx)(ae,{})},title:te,executable:!0,onlyFor:[{namespace:"Setup",name:"Scheduler"}]});var ne=["namespace","name","activated","expression"];t.default={title:"Scheduler",icon:Object(n.jsx)(l,{}),actions:{index:{fields:["namespace","name","activated","expression","updated_at"]},new:{fields:ne},edit:{viewportFields:[].concat(ne,["origin"])}},fields:{expression:{control:function(e){e.title,e.property;var t=e.value,a=e.disabled,s=e.readOnly,l=e.onChange,o=(e.errors,Object(b.a)({expression:{}})),u=Object(d.a)(o,2),j=u[0],h=u[1],g=Object(i.useRef)(B.a.string()),y=V(),_=(j.menuAnchor,j.expression),C=Object(i.useCallback)((function(e,a){h(Object(c.a)({expression:e},a)),t.set(e),l(e)}),[t,l]);Object(i.useEffect)((function(){var e=t.changed().subscribe((function(e){C(e),g.current=B.a.string()}));return function(){return e.unsubscribe()}}),[t,C]);var R,N,k,z,T=function(e){return function(){if(_.type!==e){var t=Object(c.a)({},_);if(Object.keys(_).forEach((function(e){"start_at"!==e&&"end_at"!==e&&delete t[e]})),t.type=e,"appointed"===e){var a=new Date;t.hours=[a.getHours()],t.minutes=[a.getMinutes()]}C(t)}}},M=[{title:"Starting immediately",action:function(){var e=Object(c.a)({},_);delete e.start_at,C(e)}},{title:"Starting at",action:function(){var e=Object(c.a)(Object(c.a)({},_),{},{start_at:new Date});C(e)},defaultOption:_.start_at}],L=[{title:"Repeat every",action:T("cyclic")},{title:"Repeat at",action:T("appointed"),defaultOption:"appointed"===_.type}],S=[{title:"Indefinitely",action:function(){var e=Object(c.a)({},_);delete e.end_at,C(e)}},{title:"Ending at",action:function(){var e=Object(c.a)(Object(c.a)({},_),{},{end_at:Object(m.a)(new Date,1)});C(e)},defaultOption:_.end_at}];if(_.start_at&&(R=Object(n.jsx)(p.a,{value:_.start_at,format:"yyyy/MM/dd HH:mm",onChange:function(e){return C(Object(c.a)(Object(c.a)({},_),{},{start_at:e}))},disabled:a,readOnly:s})),_.end_at&&(N=Object(n.jsx)(p.a,{value:_.end_at,format:"yyyy/MM/dd HH:mm",onChange:function(e){return C(Object(c.a)(Object(c.a)({},_),{},{end_at:e}))},disabled:a,readOnly:s})),"appointed"===_.type){var H,$,P=new Date;P.setHours(_.hours[0],_.minutes[0]),k=Object(n.jsx)(v.a,{ampm:!1,value:P,onChange:function(e){return C(Object(c.a)(Object(c.a)({},_),{},{hours:[e.getHours()],minutes:[e.getMinutes()]}))},disabled:a,readOnly:s});var W=Object(r.a)(_.weeks_month||[]);_.last_week_in_month&&W.push("Last");var Z=Object(n.jsxs)(F.a,{title:"on week days",variant:"button",defaultCollapsed:!(null===(H=_.weeks_days)||void 0===H?void 0:H.length),children:[Object(n.jsxs)(A,{value:_.weeks_days||[],onChange:function(e,t){return!s&&C(Object(c.a)(Object(c.a)({},_),{},{weeks_days:t}))},size:"small",children:[Object(n.jsx)(D,{value:0,disabled:a,children:"Sun"}),Object(n.jsx)(D,{value:1,disabled:a,children:"Mon"}),Object(n.jsx)(D,{value:2,disabled:a,children:"Tue"}),Object(n.jsx)(D,{value:3,disabled:a,children:"Wed"}),Object(n.jsx)(D,{value:4,disabled:a,children:"Thu"}),Object(n.jsx)(D,{value:5,disabled:a,children:"Fri"}),Object(n.jsx)(D,{value:6,disabled:a,children:"Sat"})]}),Object(n.jsxs)("div",{className:Object(w.default)("flex align-items-center",y.marginTop),children:[Object(n.jsx)(E.a,{className:Object(w.default)(y.marginRight,y.word),variant:"button",children:"the"}),Object(n.jsxs)(A,{className:y.marginRight,value:W,onChange:function(e,t){if(!s){var a=Object(c.a)(Object(c.a)({},_),{},{weeks_month:t}),n=t.indexOf("Last");-1!==n?(t.splice(n,1),a.last_week_in_month=!0):delete a.last_week_in_month,C(a)}},size:"small",children:[Object(n.jsx)(D,{value:0,disabled:a,children:"First"}),Object(n.jsx)(D,{value:1,disabled:a,children:"Second"}),Object(n.jsx)(D,{value:2,disabled:a,children:"Third"}),Object(n.jsx)(D,{value:3,disabled:a,children:"Fourth"}),Object(n.jsx)(D,{value:"Last",disabled:a,children:"Last"})]}),Object(n.jsx)(E.a,{className:y.word,variant:"button",children:"weeks"})]})]}),G=Object(r.a)(_.months_days||[]);_.last_day_in_month&&G.push("Last");var X=[0,1,2,3].map((function(e){return Array.from(Array(8).keys()).map((function(t,a){return 8*e+a+1}))}));X[3][7]="Last",X=X.map((function(e,t){return Object(n.jsx)(A,{value:G,onChange:function(e,t){if(!s){var a=Object(c.a)(Object(c.a)({},_),{},{months_days:t}),n=t.indexOf("Last");-1!==n?(t.splice(n,1),a.last_day_in_month=!0):delete a.last_day_in_month,C(a)}},size:"small",children:e.map((function(e){return Object(n.jsx)(D,{value:e,disabled:a,children:Object(n.jsx)("div",{className:y.day,children:e})},"day_".concat(e))}))},"days_row_".concat(t))})),X=Object(n.jsx)(F.a,{title:"the month days",variant:"button",defaultCollapsed:!G.length,children:Object(n.jsx)("div",{className:"flex column",children:X})}),z=Object(n.jsxs)("div",{className:"flex column",children:[Z,X,Object(n.jsxs)(F.a,{title:"on months",variant:"button",defaultCollapsed:!(null===($=_.months)||void 0===$?void 0:$.length),children:[Object(n.jsxs)(A,{value:_.months||[],onChange:function(e,t){return!s&&C(Object(c.a)(Object(c.a)({},_),{},{months:t}))},size:"small",children:[Object(n.jsx)(D,{value:1,disabled:a,children:"Jan"}),Object(n.jsx)(D,{value:2,disabled:a,children:"Feb"}),Object(n.jsx)(D,{value:3,disabled:a,children:"Mar"}),Object(n.jsx)(D,{value:4,disabled:a,children:"Apr"}),Object(n.jsx)(D,{value:5,disabled:a,children:"May"}),Object(n.jsx)(D,{value:6,disabled:a,children:"Jun"})]}),Object(n.jsxs)(A,{className:y.marginRight,value:_.months||[],onChange:function(e,t){return!s&&C(Object(c.a)(Object(c.a)({},_),{},{months:t}))},size:"small",children:[Object(n.jsx)(D,{value:7,disabled:a,children:"Jul"}),Object(n.jsx)(D,{value:8,disabled:a,children:"Ago"}),Object(n.jsx)(D,{value:9,disabled:a,children:"Sep"}),Object(n.jsx)(D,{value:10,disabled:a,children:"Oct"}),Object(n.jsx)(D,{value:11,disabled:a,children:"Nov"}),Object(n.jsx)(D,{value:12,disabled:a,children:"Dec"})]})]})]})}else if("cyclic"===_.type&&_.cyclic_expression){var q=_.cyclic_expression,K=Math.abs(parseInt(q.substring(0,q.length-1)))||1,Q=q.substring(q.length-1,q.length);k=Object(n.jsxs)("div",{className:"flex align-items-center",children:[Object(n.jsx)(x.a,{value:K,className:y.marginRight,onChange:function(e){return C(Object(c.a)(Object(c.a)({},_),{},{cyclic_expression:"".concat(Math.abs(parseInt(e.target.value))||1).concat(Q)}))},type:"number",disabled:a,readOnly:s}),Object(n.jsxs)(f.a,{value:Q,onChange:function(e){return C(Object(c.a)(Object(c.a)({},_),{},{cyclic_expression:"".concat(K).concat(e.target.value)}))},input:Object(n.jsx)(I,{}),disabled:a,readOnly:s,children:[Object(n.jsx)(O.a,{value:"s",children:"seconds"}),Object(n.jsx)(O.a,{value:"m",children:"minutes"}),Object(n.jsx)(O.a,{value:"h",children:"hours"}),Object(n.jsx)(O.a,{value:"d",children:"days"}),Object(n.jsx)(O.a,{value:"w",children:"weeks"}),Object(n.jsx)(O.a,{value:"M",children:"months"})]})]})}else C(Object(c.a)(Object(c.a)({},_),{},{type:"cyclic",cyclic_expression:"20m"}));return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"flex align-items-center",children:[Object(n.jsx)(J,{options:M,disabled:a,readOnly:s,className:y.marginRight}),R]}),Object(n.jsxs)("div",{className:Object(w.default)("flex column",y.period),children:[Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(J,{options:L,disabled:a,readOnly:s,className:y.marginRight}),k]}),z]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(J,{options:S,disabled:a,readOnly:s,className:y.marginRight}),N]})]},g.current)}},activated:{readOnly:!0}}}},1201:function(e,t,a){"use strict";var n=a(22),i=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=i(a(0)),s=(0,n(a(24)).default)(c.createElement("path",{d:"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNew");t.default=s}}]);